<!DOCTYPE html>
<!-- saved from url=(0030)http://yasakacorp.com/tank.htm -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet"> 
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kampfpanzer 07 RH Marathon Calculator</title>
<style>
    body{
        background-color: #1C1B16;
        background-image: url(https://sg-wotp.wgcdn.co/static/5.84.0_19f5c5/wotp_static/img/core/frontend/scss/common/blocks/sparkles/img/sparkles.png);
        color: #fff;
        font-family: bebas neue;
    }
    .logo{
        position: fixed;
        left: calc(50% - 154.5px);
        top: 5%;
    }
    .container{
        position: fixed;
        top: calc(5% + 136px);
        width: 100%;
        text-align: center;
    }
    .progress-bar{
        position: relative;
        width: 80%;
        margin-left: 10%;
        margin-bottom: 40px;
        height: 10px;
        padding: 2px;
        background: #000;
    }
    .target-discount,.current-exp{
        position: relative;
        width: 80%;
        margin-left: 10%;
        margin-top: 20px;
        padding: 2px;
    }
    #targetDiscountSlider,#currentExpSlider{
        width: 100%;
    }
    .slider-container{
        width: 90%;
        margin: 0 5% 20px 5%;
    }
    .progress-bar .seperator{
        position: absolute;
        content: '';
        box-sizing: border-box;
        border-left: 1px rgba(100,100,100,0.8) solid;
        height: 25px;
        top: -5px;
        width: 1px;
    }
    .progress-bar .seperator p{
        position: absolute;
        font-size: 4px;
        top: 20px;
    }
    .progress-bar :nth-child(11){
        right: 0px;
    }
    .progress-bar :nth-child(11) p{
        top: 0px;
        left: -20px;
        font-size: 30px;
    }
    .bar{
        position: relative;
        box-sizing: border-box;
        height: 100%;
        background: repeating-linear-gradient(90deg,#FFEBB1,#FFEBB1 1px,#FF5500 1px,#FF5500 2px);
    }
    .info{
        color: #deb887;
        margin: 10px;
        display: flex;
        justify-content: center;
        width: 100%;
    }
    .info h3,.info h2{
        font-size: 16px;
        margin: 10px;
    }
    .info h3{
        color: #fff;
    }
    .target{
        width: 33.3%;
        float: left;
    }
    .target h2{
        font-size: 20px;
        margin: 0px;
    }
    .target h1{
        color: #deb887;
        font-size: 42px;
        margin: 0px;
    }
    .target-daily-average h1{
        color: aquamarine;
    }
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
    }
    input[type=number] {
    -moz-appearance: textfield;
    }
    .target-current-battlepass input{
        color: aquamarine;
        font-family: bebas neue;
        font-size: 64px;
        width: 40%;
        min-width: 200px;
        text-align: center;
        background: none;
        border:3px solid rgb(85, 85, 85);
        border-radius: 10px;
    }
    .credit{
        position:fixed;
        bottom: 3%; 
        width: 100%;
        font-size: 64px;
        margin: 0px;
    }
    .credit a{
        text-decoration: none;
        font-size: 18px;
        text-align: center;
        color: #8b8b8b;
    }
</style></head>

<body>
    <img class="logo" src="https://content-wg.gcdn.co/locdoc/rich-article/bp_2021/img/logo.35943a.png" alt="">
    <div class="container">
        <h1>Kampfpanzer 07 RH Marathon Calculator</h1>
        <div class="server-info">
            <h3>Select your server:</h3>
            <select name="server" id="server">
                <option value="ASIA">ASIA server</option>
                <option value="EU">EU server</option>
                <option value="US">US server</option>
                <option value="RU">RU server</option>
            </select>
            <div class="info">
                <h2>Start：</h2>
                <h2>End：</h2>
                <h3 class="date">current time</h3>
            </div>
        </div>
        <div class="progress-bar">
            <div class="bar""></div>
            <div class="seperator"><p>-10%</p></div>
            <div class="seperator"><p>-20%</p></div>
            <div class="seperator"><p>-30%</p></div>
            <div class="seperator"><p>-40%</p></div>
            <div class="seperator"><p>-50%</p></div>
            <div class="seperator"><p>-60%</p></div>
            <div class="seperator"><p>-70%</p></div>
            <div class="seperator"><p>-80%</p></div>
            <div class="seperator"><p>-90%</p></div>
            <div class="seperator"><p>-100%</p></div>
        </div>
        <div class="slider-container">
            <h3>Move slider to choose your target level</h3>
            <input type="range" id="targetDiscountSlider" min="1" max="10" value="5" class="slider" id="myRange">
        </div>
        <div class="slider-container">
            <h3>Move slider to match your current progress</h3>
            <input type="range" id="currentExpSlider" min="0" max="1250" value="0" class="slider" id="myRange">
        </div>
        <div class="target current-exp-num">
            <h2>You are at:</h2>
            <h1>2772</h1>
        </div>
        <div class="target target-exp">
            <h2>You should be at:</h2>
            <h1>2772</h1>
        </div>
        <div class="target daily-average">
            <h2>Daily average</h2>
            <h1>1</h1>
        </div>
        <div class="credit">
            <a href="https://worldoftanks.asia/en/community/accounts/2002340856-BorisX/">BorisX[NRC-A]</a>
        </div>
    </div>
<script>
    var timer={
        timespan:{
            ASIA:[new Date('2021/05/21 09:00:00 UTC+8'),new Date('2021/05/31 09:00:00  UTC+8')],
            US:[new Date('2021/05/21 07:00:00 UTC-8'),new Date('2021/05/31 07:00:00  UTC-8')],
            EU:[new Date('2021/05/21 10:00:00 UTC+1'),new Date('2021/05/31 10:00:00  UTC+2')],
            RU:[new Date('2021/05/21 09:00:00 UTC+3'),new Date('2021/05/31 09:00:00  UTC+3')]
        },
        server:function(){
            return document.querySelector('#server').value
        },
        timeCurrent:function(){
            let date =  new Date()
            // date.setDate(date.getDate() - 1);
            return date;
        },
        timeTotal:function(server=this.server()){
            return this.timespan[server][1] - this.timespan[server][0]
        },
        timePassed:function(server=this.server()){
            return this.timeCurrent() - this.timespan[server][0]
        },
        timeProgress:function(server=this.server()){
            return this.timePassed(server) / this.timeTotal(server)
        },
        timeParse:function(i){
            let time
            switch (i) {
                case 'start':
                    time = this.timespan[this.server()][0]
                    break;
                case 'end':
                    time = this.timespan[this.server()][1]
                    break;
                case 'current':
                    time = this.timeCurrent()
                    break;
                default:
                    break;
            }
            return [time.getFullYear(),time.getMonth()+1,time.getDate(),time.getHours(),time.getMinutes(),time.getSeconds(),time.getTimezoneOffset()/-60]
        }
    }
    var marathon={
        expStage:[3000,5000,9000,16000,28000,30000,33000,36000,40000,50000],
        expSum:[3000,8000,17000,33000,61000,91000,124000,160000,200000,250000],
        display:{
            currentExp:document.querySelector('.current-exp-num').children[1],
            targetExp:document.querySelector('.target-exp').children[1],
            dailyAverage:document.querySelector('.daily-average').children[1],
            dateStart:document.querySelector('.info').children[0],
            dateEnd:document.querySelector('.info').children[1],
            dateCurrent:document.querySelector('.date'),
            progressBar:document.querySelector('.progress-bar')
        },
        controller:{
            targetDiscountSlider:document.querySelector('#targetDiscountSlider'),
            currentExpSlider:document.querySelector('#currentExpSlider')
        },
        stageCalc:function(input){
            let stage
            let stageExp
            for(var i=0;i<this.expSum.length;i++){
                if(input - this.expSum[i] > 0){
                    i++
                }
                if(input - this.expSum[i] < 0 && i>0){
                    stageExp = input - this.expSum[i-1]
                    stage = i+1
                    return [stage,Number(stageExp).toLocaleString()]
                }
                if(input - this.expSum[i] < 0 && i==0){
                    stageExp = input
                    stage = 1
                    return [stage,Number(stageExp).toLocaleString()]
                }
                if(input - this.expSum[i] == 0){
                    stageExp = input
                    stage = i+1
                    return [stage,Number(stageExp).toLocaleString()]
                }
            }
        },
        update:function(){
            //update times in the info section
            let dateStart = timer.timeParse('start')
            let dateEnd = timer.timeParse('end')
            let dateCurrent = timer.timeParse('current')
            this.display.dateStart.innerHTML = 'Start:'+dateStart[0]+'-'+dateStart[1]+'-'+dateStart[2]+' '+dateStart[3]+':00 UTC+'+dateStart[6]
            this.display.dateEnd.innerHTML = 'End:'+dateEnd[0]+'-'+dateEnd[1]+'-'+dateEnd[2]+' '+dateEnd[3]+':00 UTC+'+dateEnd[6]
            this.display.dateCurrent.innerHTML = 'Current Time:'+dateCurrent[0]+'-'+dateCurrent[1]+'-'+dateCurrent[2]+' '+dateCurrent[3]+':'+dateCurrent[4]+':'+dateCurrent[5]+' UTC+'+dateCurrent[6]
            //calculate where player should be at
            let targetDiscount = this.controller.targetDiscountSlider.value
            let targetSum = this.expSum[targetDiscount-1]
            let targetExp = Math.ceil(targetSum*timer.timeProgress())
            if(targetExp <= this.expSum[9]){
                this.display.targetExp.innerHTML ='Stage '+this.stageCalc(targetExp)[0]+' - '+this.stageCalc(targetExp)[1]
            }
            if(targetExp > this.expSum[9]){
                this.display.targetExp.innerHTML ='Stage 10 - 250,000'
            }
            //update progress bar
            this.display.progressBar.children[0].style.width = timer.timeProgress()*100+'%'
            this.display.progressBar.children[10].children[0].innerHTML = targetDiscount*-10+'%'
            for(var i=1;i<10;i++){
                this.display.progressBar.children[i].style.display = 'none'
                if(i<targetDiscount){
                    this.display.progressBar.children[i].style.left = this.expSum[i-1]/targetSum*100+'%'
                    this.display.progressBar.children[i].style.display = 'block'
                }
            }
            //update player's current progress
            let currentExp = this.controller.currentExpSlider.value*200
            this.display.currentExp.innerHTML = 'Stage '+this.stageCalc(currentExp)[0]+' - '+this.stageCalc(currentExp)[1]
            //update daily average
            let dailyExp = Math.ceil((targetSum-currentExp)/((timer.timeTotal()-timer.timePassed())/1000/60/60/24))
            if(dailyExp<=0){
                this.display.dailyAverage.innerHTML = 0;
            }
            if(dailyExp>0){
                this.display.dailyAverage.innerHTML = Number(dailyExp).toLocaleString();
            }
        }
    }
    document.querySelector('#server').onchange = function(){
        marathon.update()
    }
    document.querySelector('#targetDiscountSlider').onchange = function(){
        marathon.update()
    }
    document.querySelector('#currentExpSlider').onchange = function(){
        marathon.update()
    }
    var loop = setInterval(()=>{
        marathon.update()
    },100)
</script>
</body></html>